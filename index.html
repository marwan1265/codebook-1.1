<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Circadian Sleep Spiral</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js" referrerpolicy="no-referrer"></script>
  <style>
    :root {
      color-scheme: dark;
      font-family: "Inter", "Segoe UI", system-ui, -apple-system, sans-serif;
      background: #050910;
      color: #e6ecf7;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 0 20px clamp(0px, 1.2vh, 10px);
      box-sizing: border-box;
      background: #050910;
    }

    main {
      width: min(1020px, 100%);
    }

    .panel {
      width: 100%;
      padding: clamp(8px, 1.4vw, 16px) clamp(12px, 2.4vw, 22px) clamp(8px, 2vw, 18px);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: clamp(18px, 3vw, 28px);
      background: none;
      box-shadow: none;
    }

    .legend {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 16px 24px;
      font-size: 0.92rem;
      color: #c3d2e6;
    }

    .legend span {
      display: inline-flex;
      align-items: center;
      gap: 10px;
    }

    .chip {
      width: 18px;
      height: 18px;
      border-radius: 50%;
      display: inline-block;
      box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.18);
    }

    #canvas-container {
      position: relative;
      width: min(100%, calc(100vh - clamp(24px, 5vh, 74px)));
      margin: 0 auto;
      aspect-ratio: 1 / 1;
    }

    canvas {
      position: absolute !important;
      inset: 0;
      width: 100%;
      height: 100% !important;
    }

  </style>
</head>
<body>
  <main>
    <section class="panel">
      <!-- Keep the legend visible above the spiral so the chips always read left to right -->
      <div class="legend">
        <span><span class="chip" style="background: linear-gradient(140deg, #5fa9ff, #88c7ff);"></span>Asleep</span>
        <span><span class="chip" style="background: linear-gradient(140deg, #ff8a7d, #ffb07f);"></span>Wake</span>
      </div>
      <div id="canvas-container"></div>
    </section>
  <script id="sleep-data" type="application/json">
[{"id": "whoop://sleep/695955366", "dayIndex": 0, "bedtime": "2023-06-14T21:51:53-04:00", "waketime": "2023-06-15T03:27:23-04:00", "bedtimeHour": 21.8647, "waketimeHour": 3.4564, "durationHours": 5.592, "weekday": "Wednesday", "recoveryScore": 84.0}, {"id": "whoop://sleep/696692526", "dayIndex": 1, "bedtime": "2023-06-15T20:01:52-04:00", "waketime": "2023-06-16T02:10:03-04:00", "bedtimeHour": 20.0311, "waketimeHour": 2.1675, "durationHours": 6.136, "weekday": "Thursday", "recoveryScore": 80.0}, {"id": "whoop://sleep/697509866", "dayIndex": 2, "bedtime": "2023-06-17T03:20:00-04:00", "waketime": "2023-06-17T05:00:00-04:00", "bedtimeHour": 3.3333, "waketimeHour": 5.0, "durationHours": 1.667, "weekday": "Saturday", "recoveryScore": 20.0}, {"id": "whoop://sleep/698225171", "dayIndex": 3, "bedtime": "2023-06-17T21:22:22-04:00", "waketime": "2023-06-18T03:37:45-04:00", "bedtimeHour": 21.3728, "waketimeHour": 3.6292, "durationHours": 6.256, "weekday": "Saturday", "recoveryScore": 52.0}, {"id": "whoop://sleep/699158321", "dayIndex": 4, "bedtime": "2023-06-18T22:19:27-04:00", "waketime": "2023-06-19T07:52:49-04:00", "bedtimeHour": 22.3242, "waketimeHour": 7.8803, "durationHours": 9.556, "weekday": "Sunday", "recoveryScore": 89.0}, {"id": "whoop://sleep/699885248", "dayIndex": 5, "bedtime": "2023-06-20T00:11:55-04:00", "waketime": "2023-06-20T08:11:36-04:00", "bedtimeHour": 0.1986, "waketimeHour": 8.1933, "durationHours": 7.995, "weekday": "Tuesday", "recoveryScore": 88.0}, {"id": "whoop://sleep/700739691", "dayIndex": 6, "bedtime": "2023-06-21T00:40:48-04:00", "waketime": "2023-06-21T07:06:46-04:00", "bedtimeHour": 0.68, "waketimeHour": 7.1128, "durationHours": 6.433, "weekday": "Wednesday", "recoveryScore": 70.0}, {"id": "whoop://sleep/701971478", "dayIndex": 7, "bedtime": "2023-06-22T17:03:18-04:00", "waketime": "2023-06-23T01:46:15-04:00", "bedtimeHour": 17.055, "waketimeHour": 1.7708, "durationHours": 8.716, "weekday": "Thursday", "recoveryScore": 95.0}, {"id": "whoop://sleep/702884129", "dayIndex": 8, "bedtime": "2023-06-23T21:20:11-04:00", "waketime": "2023-06-24T04:00:55-04:00", "bedtimeHour": 21.3364, "waketimeHour": 4.0153, "durationHours": 6.679, "weekday": "Friday", "recoveryScore": 78.0}, {"id": "whoop://sleep/703683417", "dayIndex": 9, "bedtime": "2023-06-24T22:39:52-04:00", "waketime": "2023-06-25T07:29:55-04:00", "bedtimeHour": 22.6644, "waketimeHour": 7.4986, "durationHours": 8.834, "weekday": "Saturday", "recoveryScore": 87.0}, {"id": "whoop://sleep/704443280", "dayIndex": 10, "bedtime": "2023-06-25T23:04:48-04:00", "waketime": "2023-06-26T06:57:46-04:00", "bedtimeHour": 23.08, "waketimeHour": 6.9628, "durationHours": 7.883, "weekday": "Sunday", "recoveryScore": 84.0}, {"id": "whoop://sleep/705560601", "dayIndex": 11, "bedtime": "2023-06-26T22:56:40-04:00", "waketime": "2023-06-27T01:43:56-04:00", "bedtimeHour": 22.9444, "waketimeHour": 1.7322, "durationHours": 2.788, "weekday": "Monday", "recoveryScore": 15.0}, {"id": "whoop://sleep/705812899", "dayIndex": 12, "bedtime": "2023-06-27T14:22:46-04:00", "waketime": "2023-06-27T22:55:50-04:00", "bedtimeHour": 14.3794, "waketimeHour": 22.9306, "durationHours": 8.551, "weekday": "Tuesday", "recoveryScore": 72.0}, {"id": "whoop://sleep/706749415", "dayIndex": 13, "bedtime": "2023-06-28T17:49:54-04:00", "waketime": "2023-06-29T01:51:31-04:00", "bedtimeHour": 17.8317, "waketimeHour": 1.8586, "durationHours": 8.027, "weekday": "Wednesday", "recoveryScore": 57.0}, {"id": "whoop://sleep/707521643", "dayIndex": 14, "bedtime": "2023-06-29T21:18:54-04:00", "waketime": "2023-06-30T04:13:42-04:00", "bedtimeHour": 21.315, "waketimeHour": 4.2283, "durationHours": 6.913, "weekday": "Thursday", "recoveryScore": 18.0}, {"id": "whoop://sleep/708271879", "dayIndex": 15, "bedtime": "2023-06-30T19:04:51-04:00", "waketime": "2023-07-01T00:43:43-04:00", "bedtimeHour": 19.0808, "waketimeHour": 0.7286, "durationHours": 5.648, "weekday": "Friday", "recoveryScore": 33.0}, {"id": "whoop://sleep/709008460", "dayIndex": 16, "bedtime": "2023-07-01T20:16:47-04:00", "waketime": "2023-07-01T21:19:45-04:00", "bedtimeHour": 20.2797, "waketimeHour": 21.3292, "durationHours": 1.049, "weekday": "Saturday", "recoveryScore": 8.0}, {"id": "whoop://sleep/709858226", "dayIndex": 17, "bedtime": "2023-07-02T18:41:03-04:00", "waketime": "2023-07-03T03:07:40-04:00", "bedtimeHour": 18.6842, "waketimeHour": 3.1278, "durationHours": 8.444, "weekday": "Sunday", "recoveryScore": 80.0}, {"id": "whoop://sleep/710567571", "dayIndex": 18, "bedtime": "2023-07-03T18:56:30-04:00", "waketime": "2023-07-04T00:00:50-04:00", "bedtimeHour": 18.9417, "waketimeHour": 0.0139, "durationHours": 5.072, "weekday": "Monday", "recoveryScore": 68.0}, {"id": "whoop://sleep/711367567", "dayIndex": 19, "bedtime": "2023-07-04T16:15:19-04:00", "waketime": "2023-07-05T00:15:59-04:00", "bedtimeHour": 16.2553, "waketimeHour": 0.2664, "durationHours": 8.011, "weekday": "Tuesday", "recoveryScore": 40.0}, {"id": "whoop://sleep/712275252", "dayIndex": 20, "bedtime": "2023-07-05T19:24:37-04:00", "waketime": "2023-07-06T03:01:15-04:00", "bedtimeHour": 19.4103, "waketimeHour": 3.0208, "durationHours": 7.611, "weekday": "Wednesday", "recoveryScore": 46.0}, {"id": "whoop://sleep/713037861", "dayIndex": 21, "bedtime": "2023-07-06T20:11:17-04:00", "waketime": "2023-07-07T04:29:43-04:00", "bedtimeHour": 20.1881, "waketimeHour": 4.4953, "durationHours": 8.307, "weekday": "Thursday", "recoveryScore": 79.0}, {"id": "whoop://sleep/713965741", "dayIndex": 22, "bedtime": "2023-07-07T18:23:34-04:00", "waketime": "2023-07-08T03:36:48-04:00", "bedtimeHour": 18.3928, "waketimeHour": 3.6133, "durationHours": 9.221, "weekday": "Friday", "recoveryScore": 76.0}, {"id": "whoop://sleep/714645301", "dayIndex": 23, "bedtime": "2023-07-08T19:20:23-04:00", "waketime": "2023-07-09T01:41:33-04:00", "bedtimeHour": 19.3397, "waketimeHour": 1.6925, "durationHours": 6.353, "weekday": "Saturday", "recoveryScore": 72.0}, {"id": "whoop://sleep/715427961", "dayIndex": 24, "bedtime": "2023-07-09T18:35:46-04:00", "waketime": "2023-07-10T01:23:22-04:00", "bedtimeHour": 18.5961, "waketimeHour": 1.3894, "durationHours": 6.793, "weekday": "Sunday", "recoveryScore": 36.0}, {"id": "whoop://sleep/716470183", "dayIndex": 25, "bedtime": "2023-07-10T19:23:53-04:00", "waketime": "2023-07-11T01:32:04-04:00", "bedtimeHour": 19.3981, "waketimeHour": 1.5344, "durationHours": 6.136, "weekday": "Monday", "recoveryScore": 41.0}, {"id": "whoop://sleep/717976301", "dayIndex": 26, "bedtime": "2023-07-12T18:19:53-04:00", "waketime": "2023-07-13T01:28:09-04:00", "bedtimeHour": 18.3314, "waketimeHour": 1.4692, "durationHours": 7.138, "weekday": "Wednesday", "recoveryScore": 50.0}, {"id": "whoop://sleep/718887293", "dayIndex": 27, "bedtime": "2023-07-13T21:17:59-04:00", "waketime": "2023-07-14T03:44:55-04:00", "bedtimeHour": 21.2997, "waketimeHour": 3.7486, "durationHours": 6.449, "weekday": "Thursday", "recoveryScore": 67.0}, {"id": "whoop://sleep/719941301", "dayIndex": 28, "bedtime": "2023-07-14T21:40:42-04:00", "waketime": "2023-07-15T04:57:27-04:00", "bedtimeHour": 21.6783, "waketimeHour": 4.9575, "durationHours": 7.279, "weekday": "Friday", "recoveryScore": 47.0}, {"id": "whoop://sleep/720516439", "dayIndex": 29, "bedtime": "2023-07-15T19:01:56-04:00", "waketime": "2023-07-16T06:07:09-04:00", "bedtimeHour": 19.0322, "waketimeHour": 6.1192, "durationHours": 11.087, "weekday": "Saturday", "recoveryScore": 31.0}, {"id": "whoop://sleep/721365743", "dayIndex": 30, "bedtime": "2023-07-16T22:44:23-04:00", "waketime": "2023-07-17T05:40:24-04:00", "bedtimeHour": 22.7397, "waketimeHour": 5.6733, "durationHours": 6.934, "weekday": "Sunday", "recoveryScore": 51.0}, {"id": "whoop://sleep/722302787", "dayIndex": 31, "bedtime": "2023-07-17T20:03:34-04:00", "waketime": "2023-07-18T07:28:01-04:00", "bedtimeHour": 20.0594, "waketimeHour": 7.4669, "durationHours": 11.408, "weekday": "Monday", "recoveryScore": 61.0}, {"id": "whoop://sleep/723129353", "dayIndex": 32, "bedtime": "2023-07-18T20:20:56-04:00", "waketime": "2023-07-19T06:57:19-04:00", "bedtimeHour": 20.3489, "waketimeHour": 6.9553, "durationHours": 10.606, "weekday": "Tuesday", "recoveryScore": 55.0}, {"id": "whoop://sleep/724002430", "dayIndex": 33, "bedtime": "2023-07-19T21:30:23-04:00", "waketime": "2023-07-20T07:53:48-04:00", "bedtimeHour": 21.5064, "waketimeHour": 7.8967, "durationHours": 10.39, "weekday": "Wednesday", "recoveryScore": 49.0}, {"id": "whoop://sleep/724704262", "dayIndex": 34, "bedtime": "2023-07-20T21:57:53-04:00", "waketime": "2023-07-21T05:03:44-04:00", "bedtimeHour": 21.9647, "waketimeHour": 5.0622, "durationHours": 7.098, "weekday": "Thursday", "recoveryScore": 48.0}, {"id": "whoop://sleep/725415732", "dayIndex": 35, "bedtime": "2023-07-21T20:56:15-04:00", "waketime": "2023-07-22T00:58:59-04:00", "bedtimeHour": 20.9375, "waketimeHour": 0.9831, "durationHours": 4.046, "weekday": "Friday", "recoveryScore": 23.0}, {"id": "whoop://sleep/726204498", "dayIndex": 36, "bedtime": "2023-07-22T16:39:08-04:00", "waketime": "2023-07-23T00:59:57-04:00", "bedtimeHour": 16.6522, "waketimeHour": 0.9992, "durationHours": 8.347, "weekday": "Saturday", "recoveryScore": 57.0}, {"id": "whoop://sleep/727448996", "dayIndex": 37, "bedtime": "2023-07-23T20:22:41-04:00", "waketime": "2023-07-24T01:49:03-04:00", "bedtimeHour": 20.3781, "waketimeHour": 1.8175, "durationHours": 5.439, "weekday": "Sunday", "recoveryScore": 45.0}, {"id": "whoop://sleep/727916495", "dayIndex": 38, "bedtime": "2023-07-24T18:48:02-04:00", "waketime": "2023-07-25T02:51:53-04:00", "bedtimeHour": 18.8006, "waketimeHour": 2.8647, "durationHours": 8.064, "weekday": "Monday", "recoveryScore": 72.0}, {"id": "whoop://sleep/728774474", "dayIndex": 39, "bedtime": "2023-07-25T20:00:59-04:00", "waketime": "2023-07-26T01:56:12-04:00", "bedtimeHour": 20.0164, "waketimeHour": 1.9367, "durationHours": 5.92, "weekday": "Tuesday", "recoveryScore": 77.0}, {"id": "whoop://sleep/729677574", "dayIndex": 40, "bedtime": "2023-07-26T19:41:20-04:00", "waketime": "2023-07-27T02:52:00-04:00", "bedtimeHour": 19.6889, "waketimeHour": 2.8667, "durationHours": 7.178, "weekday": "Wednesday", "recoveryScore": 71.0}, {"id": "whoop://sleep/731310660", "dayIndex": 41, "bedtime": "2023-07-28T19:32:59-04:00", "waketime": "2023-07-28T23:59:45-04:00", "bedtimeHour": 19.5497, "waketimeHour": 23.9958, "durationHours": 4.446, "weekday": "Friday", "recoveryScore": 32.0}, {"id": "whoop://sleep/732226395", "dayIndex": 42, "bedtime": "2023-07-29T18:49:48-04:00", "waketime": "2023-07-30T03:00:10-04:00", "bedtimeHour": 18.83, "waketimeHour": 3.0028, "durationHours": 8.173, "weekday": "Saturday", "recoveryScore": 76.0}, {"id": "whoop://sleep/733341903", "dayIndex": 43, "bedtime": "2023-07-30T19:11:33-04:00", "waketime": "2023-07-31T02:40:00-04:00", "bedtimeHour": 19.1925, "waketimeHour": 2.6667, "durationHours": 7.474, "weekday": "Sunday", "recoveryScore": 91.0}, {"id": "whoop://sleep/737216532", "dayIndex": 44, "bedtime": "2023-07-31T19:50:30-04:00", "waketime": "2023-08-01T01:11:55-04:00", "bedtimeHour": 19.8417, "waketimeHour": 1.1986, "durationHours": 5.357, "weekday": "Monday", "recoveryScore": 49.0}, {"id": "whoop://sleep/737595609", "dayIndex": 45, "bedtime": "2023-08-04T21:46:36-04:00", "waketime": "2023-08-05T06:24:28-04:00", "bedtimeHour": 21.7767, "waketimeHour": 6.4078, "durationHours": 8.631, "weekday": "Friday", "recoveryScore": 64.0}, {"id": "whoop://sleep/738427291", "dayIndex": 46, "bedtime": "2023-08-05T21:03:47-04:00", "waketime": "2023-08-06T06:12:42-04:00", "bedtimeHour": 21.0631, "waketimeHour": 6.2117, "durationHours": 9.149, "weekday": "Saturday", "recoveryScore": 52.0}, {"id": "whoop://sleep/739759930", "dayIndex": 47, "bedtime": "2023-08-06T23:09:35-04:00", "waketime": "2023-08-07T06:01:58-04:00", "bedtimeHour": 23.1597, "waketimeHour": 6.0328, "durationHours": 6.873, "weekday": "Sunday", "recoveryScore": 49.0}, {"id": "whoop://sleep/740511749", "dayIndex": 48, "bedtime": "2023-08-07T17:05:18-04:00", "waketime": "2023-08-08T12:13:08-04:00", "bedtimeHour": 17.0883, "waketimeHour": 12.2189, "durationHours": 19.131, "weekday": "Monday", "recoveryScore": 58.0}, {"id": "whoop://sleep/741999805", "dayIndex": 49, "bedtime": "2023-08-09T23:19:28-04:00", "waketime": "2023-08-10T06:39:44-04:00", "bedtimeHour": 23.3244, "waketimeHour": 6.6622, "durationHours": 7.338, "weekday": "Wednesday", "recoveryScore": 63.0}, {"id": "whoop://sleep/742792573", "dayIndex": 50, "bedtime": "2023-08-10T23:41:08-04:00", "waketime": "2023-08-11T05:07:01-04:00", "bedtimeHour": 23.6856, "waketimeHour": 5.1169, "durationHours": 5.431, "weekday": "Thursday", "recoveryScore": 38.0}, {"id": "whoop://sleep/743793692", "dayIndex": 51, "bedtime": "2023-08-11T23:34:38-04:00", "waketime": "2023-08-12T07:56:46-04:00", "bedtimeHour": 23.5772, "waketimeHour": 7.9461, "durationHours": 8.369, "weekday": "Friday", "recoveryScore": 62.0}, {"id": "whoop://sleep/744575818", "dayIndex": 52, "bedtime": "2023-08-12T22:39:00-04:00", "waketime": "2023-08-13T05:53:05-04:00", "bedtimeHour": 22.65, "waketimeHour": 5.8847, "durationHours": 7.235, "weekday": "Saturday", "recoveryScore": 87.0}, {"id": "whoop://sleep/745475291", "dayIndex": 53, "bedtime": "2023-08-14T00:37:19-04:00", "waketime": "2023-08-14T07:47:44-04:00", "bedtimeHour": 0.6219, "waketimeHour": 7.7956, "durationHours": 7.174, "weekday": "Monday", "recoveryScore": 85.0}, {"id": "whoop://sleep/746641789", "dayIndex": 54, "bedtime": "2023-08-15T03:32:11-04:00", "waketime": "2023-08-15T05:02:32-04:00", "bedtimeHour": 3.5364, "waketimeHour": 5.0422, "durationHours": 1.506, "weekday": "Tuesday", "recoveryScore": 3.0}, {"id": "whoop://sleep/747075088", "dayIndex": 55, "bedtime": "2023-08-15T18:46:23-04:00", "waketime": "2023-08-16T02:55:41-04:00", "bedtimeHour": 18.7731, "waketimeHour": 2.9281, "durationHours": 8.155, "weekday": "Tuesday", "recoveryScore": 92.0}, {"id": "whoop://sleep/748131001", "dayIndex": 56, "bedtime": "2023-08-16T23:16:39-04:00", "waketime": "2023-08-17T06:17:14-04:00", "bedtimeHour": 23.2775, "waketimeHour": 6.2872, "durationHours": 7.01, "weekday": "Wednesday", "recoveryScore": 52.0}, {"id": "whoop://sleep/749004563", "dayIndex": 57, "bedtime": "2023-08-17T23:26:48-04:00", "waketime": "2023-08-18T06:02:51-04:00", "bedtimeHour": 23.4467, "waketimeHour": 6.0475, "durationHours": 6.601, "weekday": "Thursday", "recoveryScore": 56.0}, {"id": "whoop://sleep/749976876", "dayIndex": 58, "bedtime": "2023-08-19T02:13:14-04:00", "waketime": "2023-08-19T07:27:41-04:00", "bedtimeHour": 2.2206, "waketimeHour": 7.4614, "durationHours": 5.241, "weekday": "Saturday", "recoveryScore": 37.0}, {"id": "whoop://sleep/751250332", "dayIndex": 59, "bedtime": "2023-08-20T01:41:38-04:00", "waketime": "2023-08-20T08:28:23-04:00", "bedtimeHour": 1.6939, "waketimeHour": 8.4731, "durationHours": 6.779, "weekday": "Sunday", "recoveryScore": 34.0}, {"id": "whoop://sleep/752117114", "dayIndex": 60, "bedtime": "2023-08-20T22:59:48-04:00", "waketime": "2023-08-21T05:18:34-04:00", "bedtimeHour": 22.9967, "waketimeHour": 5.3094, "durationHours": 6.313, "weekday": "Sunday", "recoveryScore": 50.0}, {"id": "whoop://sleep/752371804", "dayIndex": 61, "bedtime": "2023-08-21T21:21:47-04:00", "waketime": "2023-08-22T02:57:17-04:00", "bedtimeHour": 21.3631, "waketimeHour": 2.9547, "durationHours": 5.592, "weekday": "Monday", "recoveryScore": 55.0}, {"id": "whoop://sleep/754496330", "dayIndex": 62, "bedtime": "2023-08-24T00:36:50-04:00", "waketime": "2023-08-24T08:13:56-04:00", "bedtimeHour": 0.6139, "waketimeHour": 8.2322, "durationHours": 7.618, "weekday": "Thursday", "recoveryScore": 67.0}, {"id": "whoop://sleep/755136749", "dayIndex": 63, "bedtime": "2023-08-24T21:30:20-04:00", "waketime": "2023-08-25T02:59:45-04:00", "bedtimeHour": 21.5056, "waketimeHour": 2.9958, "durationHours": 5.49, "weekday": "Thursday", "recoveryScore": 40.0}, {"id": "whoop://sleep/756423017", "dayIndex": 64, "bedtime": "2023-08-25T22:23:32-04:00", "waketime": "2023-08-26T05:29:53-04:00", "bedtimeHour": 22.3922, "waketimeHour": 5.4981, "durationHours": 7.106, "weekday": "Friday", "recoveryScore": 81.0}, {"id": "whoop://sleep/757171267", "dayIndex": 65, "bedtime": "2023-08-26T22:15:53-04:00", "waketime": "2023-08-27T07:35:20-04:00", "bedtimeHour": 22.2647, "waketimeHour": 7.5889, "durationHours": 9.324, "weekday": "Saturday", "recoveryScore": 69.0}, {"id": "whoop://sleep/758853010", "dayIndex": 66, "bedtime": "2023-08-28T23:51:26-04:00", "waketime": "2023-08-29T08:26:13-04:00", "bedtimeHour": 23.8572, "waketimeHour": 8.4369, "durationHours": 8.58, "weekday": "Monday", "recoveryScore": 73.0}, {"id": "whoop://sleep/760149231", "dayIndex": 67, "bedtime": "2023-08-30T03:46:32-04:00", "waketime": "2023-08-30T09:38:22-04:00", "bedtimeHour": 3.7756, "waketimeHour": 9.6394, "durationHours": 5.864, "weekday": "Wednesday", "recoveryScore": 18.0}, {"id": "whoop://sleep/761011447", "dayIndex": 68, "bedtime": "2023-08-31T06:04:31-04:00", "waketime": "2023-08-31T12:48:31-04:00", "bedtimeHour": 6.0753, "waketimeHour": 12.8086, "durationHours": 6.733, "weekday": "Thursday", "recoveryScore": 5.0}, {"id": "whoop://sleep/761769245", "dayIndex": 69, "bedtime": "2023-09-01T02:36:44-04:00", "waketime": "2023-09-01T10:45:05-04:00", "bedtimeHour": 2.6122, "waketimeHour": 10.7514, "durationHours": 8.139, "weekday": "Friday", "recoveryScore": 82.0}, {"id": "whoop://sleep/765542322", "dayIndex": 70, "bedtime": "2023-09-05T05:02:17-04:00", "waketime": "2023-09-05T12:41:19-04:00", "bedtimeHour": 5.0381, "waketimeHour": 12.6886, "durationHours": 7.651, "weekday": "Tuesday", "recoveryScore": 95.0}, {"id": "whoop://sleep/766489243", "dayIndex": 71, "bedtime": "2023-09-06T05:12:02-04:00", "waketime": "2023-09-06T12:09:43-04:00", "bedtimeHour": 5.2006, "waketimeHour": 12.1619, "durationHours": 6.961, "weekday": "Wednesday", "recoveryScore": 81.0}, {"id": "whoop://sleep/767401270", "dayIndex": 72, "bedtime": "2023-09-07T05:23:56-04:00", "waketime": "2023-09-07T11:22:14-04:00", "bedtimeHour": 5.3989, "waketimeHour": 11.3706, "durationHours": 5.972, "weekday": "Thursday", "recoveryScore": 80.0}, {"id": "whoop://sleep/768412163", "dayIndex": 73, "bedtime": "2023-09-08T03:18:31-04:00", "waketime": "2023-09-08T13:09:43-04:00", "bedtimeHour": 3.3086, "waketimeHour": 13.1619, "durationHours": 9.853, "weekday": "Friday", "recoveryScore": 60.0}, {"id": "whoop://sleep/769354958", "dayIndex": 74, "bedtime": "2023-09-09T05:01:54-04:00", "waketime": "2023-09-09T14:38:41-04:00", "bedtimeHour": 5.0317, "waketimeHour": 14.6447, "durationHours": 9.613, "weekday": "Saturday", "recoveryScore": 30.0}, {"id": "whoop://sleep/770343320", "dayIndex": 75, "bedtime": "2023-09-10T05:14:56-04:00", "waketime": "2023-09-10T13:31:56-04:00", "bedtimeHour": 5.2489, "waketimeHour": 13.5322, "durationHours": 8.283, "weekday": "Sunday", "recoveryScore": 49.0}, {"id": "whoop://sleep/770645786", "dayIndex": 76, "bedtime": "2023-09-11T01:25:43-04:00", "waketime": "2023-09-11T08:00:00-04:00", "bedtimeHour": 1.4286, "waketimeHour": 8.0, "durationHours": 6.571, "weekday": "Monday", "recoveryScore": 67.0}, {"id": "whoop://sleep/774752518", "dayIndex": 77, "bedtime": "2023-09-15T03:43:16-04:00", "waketime": "2023-09-15T07:35:25-04:00", "bedtimeHour": 3.7211, "waketimeHour": 7.5903, "durationHours": 3.869, "weekday": "Friday", "recoveryScore": 37.0}, {"id": "whoop://sleep/775793140", "dayIndex": 78, "bedtime": "2023-09-16T05:02:07-04:00", "waketime": "2023-09-16T14:50:56-04:00", "bedtimeHour": 5.0353, "waketimeHour": 14.8489, "durationHours": 9.814, "weekday": "Saturday", "recoveryScore": 32.0}, {"id": "whoop://sleep/776796936", "dayIndex": 79, "bedtime": "2023-09-17T06:23:52-04:00", "waketime": "2023-09-17T15:15:58-04:00", "bedtimeHour": 6.3978, "waketimeHour": 15.2661, "durationHours": 8.868, "weekday": "Sunday", "recoveryScore": 41.0}, {"id": "whoop://sleep/785668687", "dayIndex": 80, "bedtime": "2023-09-18T02:54:21-04:00", "waketime": "2023-09-18T08:41:51-04:00", "bedtimeHour": 2.9058, "waketimeHour": 8.6975, "durationHours": 5.792, "weekday": "Monday", "recoveryScore": 91.0}, {"id": "whoop://sleep/785718829", "dayIndex": 81, "bedtime": "2023-09-19T03:06:59-04:00", "waketime": "2023-09-19T08:58:25-04:00", "bedtimeHour": 3.1164, "waketimeHour": 8.9736, "durationHours": 5.857, "weekday": "Tuesday", "recoveryScore": 49.0}, {"id": "whoop://sleep/786474129", "dayIndex": 82, "bedtime": "2023-09-27T03:04:58-04:00", "waketime": "2023-09-27T12:26:22-04:00", "bedtimeHour": 3.0828, "waketimeHour": 12.4394, "durationHours": 9.357, "weekday": "Wednesday", "recoveryScore": 92.0}, {"id": "whoop://sleep/787525138", "dayIndex": 83, "bedtime": "2023-09-28T04:29:07-04:00", "waketime": "2023-09-28T13:43:48-04:00", "bedtimeHour": 4.4853, "waketimeHour": 13.73, "durationHours": 9.245, "weekday": "Thursday", "recoveryScore": 49.0}, {"id": "whoop://sleep/788332896", "dayIndex": 84, "bedtime": "2023-09-29T05:06:45-04:00", "waketime": "2023-09-29T09:34:51-04:00", "bedtimeHour": 5.1125, "waketimeHour": 9.5808, "durationHours": 4.468, "weekday": "Friday", "recoveryScore": 46.0}, {"id": "whoop://sleep/906197928", "dayIndex": 85, "bedtime": "2024-01-24T06:02:17-04:00", "waketime": "2024-01-24T11:23:51-04:00", "bedtimeHour": 6.0381, "waketimeHour": 11.3975, "durationHours": 5.359, "weekday": "Wednesday", "recoveryScore": 84.0}, {"id": "whoop://sleep/907482676", "dayIndex": 86, "bedtime": "2024-01-25T06:13:24-04:00", "waketime": "2024-01-25T13:03:24-04:00", "bedtimeHour": 6.2233, "waketimeHour": 13.0567, "durationHours": 6.833, "weekday": "Thursday", "recoveryScore": 38.0}, {"id": "whoop://sleep/908444199", "dayIndex": 87, "bedtime": "2024-01-26T01:43:27-04:00", "waketime": "2024-01-26T09:19:36-04:00", "bedtimeHour": 1.7242, "waketimeHour": 9.3267, "durationHours": 7.603, "weekday": "Friday", "recoveryScore": 18.0}, {"id": "whoop://sleep/909879742", "dayIndex": 88, "bedtime": "2024-01-27T05:51:31-04:00", "waketime": "2024-01-27T12:56:27-04:00", "bedtimeHour": 5.8586, "waketimeHour": 12.9408, "durationHours": 7.082, "weekday": "Saturday", "recoveryScore": 81.0}, {"id": "whoop://sleep/911281187", "dayIndex": 89, "bedtime": "2024-01-28T11:30:56-04:00", "waketime": "2024-01-28T17:24:13-04:00", "bedtimeHour": 11.5156, "waketimeHour": 17.4036, "durationHours": 5.888, "weekday": "Sunday", "recoveryScore": 75.0}, {"id": "whoop://sleep/912295693", "dayIndex": 90, "bedtime": "2024-01-29T10:14:33-04:00", "waketime": "2024-01-29T17:38:11-04:00", "bedtimeHour": 10.2425, "waketimeHour": 17.6364, "durationHours": 7.394, "weekday": "Monday", "recoveryScore": 90.0}, {"id": "whoop://sleep/913479686", "dayIndex": 91, "bedtime": "2024-01-30T07:28:45-04:00", "waketime": "2024-01-30T12:15:14-04:00", "bedtimeHour": 7.4792, "waketimeHour": 12.2539, "durationHours": 4.775, "weekday": "Tuesday", "recoveryScore": 49.0}, {"id": "whoop://sleep/914802493", "dayIndex": 92, "bedtime": "2024-01-31T05:31:31-04:00", "waketime": "2024-01-31T13:39:52-04:00", "bedtimeHour": 5.5253, "waketimeHour": 13.6644, "durationHours": 8.139, "weekday": "Wednesday", "recoveryScore": 85.0}, {"id": "whoop://sleep/916078929", "dayIndex": 93, "bedtime": "2024-02-01T08:09:16-04:00", "waketime": "2024-02-01T16:23:52-04:00", "bedtimeHour": 8.1544, "waketimeHour": 16.3978, "durationHours": 8.243, "weekday": "Thursday", "recoveryScore": 86.0}, {"id": "whoop://sleep/917190651", "dayIndex": 94, "bedtime": "2024-02-02T07:49:36-04:00", "waketime": "2024-02-02T16:02:16-04:00", "bedtimeHour": 7.8267, "waketimeHour": 16.0378, "durationHours": 8.211, "weekday": "Friday", "recoveryScore": 89.0}, {"id": "whoop://sleep/919530582", "dayIndex": 95, "bedtime": "2024-02-04T06:55:55-04:00", "waketime": "2024-02-04T15:17:16-04:00", "bedtimeHour": 6.9319, "waketimeHour": 15.2878, "durationHours": 8.356, "weekday": "Sunday", "recoveryScore": 63.0}, {"id": "whoop://sleep/921710841", "dayIndex": 96, "bedtime": "2024-02-06T03:55:24-04:00", "waketime": "2024-02-06T08:45:14-04:00", "bedtimeHour": 3.9233, "waketimeHour": 8.7539, "durationHours": 4.831, "weekday": "Tuesday", "recoveryScore": 47.0}, {"id": "whoop://sleep/923228447", "dayIndex": 97, "bedtime": "2024-02-07T08:01:03-04:00", "waketime": "2024-02-07T12:40:48-04:00", "bedtimeHour": 8.0175, "waketimeHour": 12.68, "durationHours": 4.662, "weekday": "Wednesday", "recoveryScore": 71.0}, {"id": "whoop://sleep/924580723", "dayIndex": 98, "bedtime": "2024-02-08T08:09:16-04:00", "waketime": "2024-02-08T15:41:34-04:00", "bedtimeHour": 8.1544, "waketimeHour": 15.6928, "durationHours": 7.538, "weekday": "Thursday", "recoveryScore": 71.0}, {"id": "whoop://sleep/925751778", "dayIndex": 99, "bedtime": "2024-02-09T08:26:08-04:00", "waketime": "2024-02-09T14:36:43-04:00", "bedtimeHour": 8.4356, "waketimeHour": 14.6119, "durationHours": 6.176, "weekday": "Friday", "recoveryScore": 61.0}, {"id": "whoop://sleep/933023134", "dayIndex": 100, "bedtime": "2024-02-15T07:48:27-04:00", "waketime": "2024-02-15T15:45:16-04:00", "bedtimeHour": 7.8075, "waketimeHour": 15.7544, "durationHours": 7.947, "weekday": "Thursday", "recoveryScore": 86.0}, {"id": "whoop://sleep/933887543", "dayIndex": 101, "bedtime": "2024-02-16T04:52:35-04:00", "waketime": "2024-02-16T11:17:35-04:00", "bedtimeHour": 4.8764, "waketimeHour": 11.2931, "durationHours": 6.417, "weekday": "Friday", "recoveryScore": 83.0}, {"id": "whoop://sleep/935504519", "dayIndex": 102, "bedtime": "2024-02-17T09:58:48-04:00", "waketime": "2024-02-17T19:40:53-04:00", "bedtimeHour": 9.98, "waketimeHour": 19.6814, "durationHours": 9.701, "weekday": "Saturday", "recoveryScore": 85.0}, {"id": "whoop://sleep/936780731", "dayIndex": 103, "bedtime": "2024-02-18T09:56:27-04:00", "waketime": "2024-02-18T19:30:21-04:00", "bedtimeHour": 9.9408, "waketimeHour": 19.5058, "durationHours": 9.565, "weekday": "Sunday", "recoveryScore": 30.0}, {"id": "whoop://sleep/1866812220", "dayIndex": 104, "bedtime": "2025-07-24T16:13:44-04:00", "waketime": "2025-07-25T00:08:15-04:00", "bedtimeHour": 16.2289, "waketimeHour": 0.1375, "durationHours": 7.909, "weekday": "Thursday", "recoveryScore": 97.0}, {"id": "whoop://sleep/1869360577", "dayIndex": 105, "bedtime": "2025-07-25T17:01:06-04:00", "waketime": "2025-07-26T00:27:32-04:00", "bedtimeHour": 17.0183, "waketimeHour": 0.4589, "durationHours": 7.441, "weekday": "Friday", "recoveryScore": 82.0}, {"id": "whoop://sleep/1872104892", "dayIndex": 106, "bedtime": "2025-07-26T19:34:56-04:00", "waketime": "2025-07-27T02:06:21-04:00", "bedtimeHour": 19.5822, "waketimeHour": 2.1058, "durationHours": 6.524, "weekday": "Saturday", "recoveryScore": 76.0}, {"id": "whoop://sleep/1874302397", "dayIndex": 107, "bedtime": "2025-07-27T17:24:28-04:00", "waketime": "2025-07-27T23:30:59-04:00", "bedtimeHour": 17.4078, "waketimeHour": 23.5164, "durationHours": 6.109, "weekday": "Sunday", "recoveryScore": 90.0}, {"id": "whoop://sleep/1877337654", "dayIndex": 108, "bedtime": "2025-07-28T17:15:22-04:00", "waketime": "2025-07-29T01:24:23-04:00", "bedtimeHour": 17.2561, "waketimeHour": 1.4064, "durationHours": 8.15, "weekday": "Monday", "recoveryScore": 65.0}, {"id": "whoop://sleep/1880244805", "dayIndex": 109, "bedtime": "2025-07-29T17:48:55-04:00", "waketime": "2025-07-30T03:03:42-04:00", "bedtimeHour": 17.8153, "waketimeHour": 3.0617, "durationHours": 9.246, "weekday": "Tuesday", "recoveryScore": 49.0}, {"id": "whoop://sleep/1882610828", "dayIndex": 110, "bedtime": "2025-07-30T18:57:57-04:00", "waketime": "2025-07-31T02:29:28-04:00", "bedtimeHour": 18.9658, "waketimeHour": 2.4911, "durationHours": 7.525, "weekday": "Wednesday", "recoveryScore": 40.0}, {"id": "whoop://sleep/1885462023", "dayIndex": 111, "bedtime": "2025-07-31T20:41:28-04:00", "waketime": "2025-08-01T02:51:30-04:00", "bedtimeHour": 20.6911, "waketimeHour": 2.8583, "durationHours": 6.167, "weekday": "Thursday", "recoveryScore": 83.0}, {"id": "whoop://sleep/1887592564", "dayIndex": 112, "bedtime": "2025-08-01T18:58:30-04:00", "waketime": "2025-08-01T22:03:00-04:00", "bedtimeHour": 18.975, "waketimeHour": 22.05, "durationHours": 3.075, "weekday": "Friday", "recoveryScore": 27.0}, {"id": "whoop://sleep/1890570892", "dayIndex": 113, "bedtime": "2025-08-02T19:20:41-04:00", "waketime": "2025-08-03T03:02:19-04:00", "bedtimeHour": 19.3447, "waketimeHour": 3.0386, "durationHours": 7.694, "weekday": "Saturday", "recoveryScore": 84.0}, {"id": "whoop://sleep/1893348942", "dayIndex": 114, "bedtime": "2025-08-03T20:52:43-04:00", "waketime": "2025-08-04T04:19:53-04:00", "bedtimeHour": 20.8786, "waketimeHour": 4.3314, "durationHours": 7.453, "weekday": "Sunday", "recoveryScore": 67.0}, {"id": "whoop://sleep/1896016584", "dayIndex": 115, "bedtime": "2025-08-04T21:22:16-04:00", "waketime": "2025-08-05T03:30:17-04:00", "bedtimeHour": 21.3711, "waketimeHour": 3.5047, "durationHours": 6.134, "weekday": "Monday", "recoveryScore": 60.0}, {"id": "whoop://sleep/1898694732", "dayIndex": 116, "bedtime": "2025-08-05T19:22:47-04:00", "waketime": "2025-08-06T02:00:52-04:00", "bedtimeHour": 19.3797, "waketimeHour": 2.0144, "durationHours": 6.635, "weekday": "Tuesday", "recoveryScore": 68.0}, {"id": "whoop://sleep/1901632618", "dayIndex": 117, "bedtime": "2025-08-06T19:09:47-04:00", "waketime": "2025-08-07T04:08:48-04:00", "bedtimeHour": 19.1631, "waketimeHour": 4.1467, "durationHours": 8.984, "weekday": "Wednesday", "recoveryScore": 95.0}, {"id": "whoop://sleep/1904036524", "dayIndex": 118, "bedtime": "2025-08-07T20:30:19-04:00", "waketime": "2025-08-08T04:25:20-04:00", "bedtimeHour": 20.5053, "waketimeHour": 4.4222, "durationHours": 7.917, "weekday": "Thursday", "recoveryScore": 93.0}, {"id": "whoop://sleep/1906910994", "dayIndex": 119, "bedtime": "2025-08-08T19:08:37-04:00", "waketime": "2025-08-09T03:16:39-04:00", "bedtimeHour": 19.1436, "waketimeHour": 3.2775, "durationHours": 8.134, "weekday": "Friday", "recoveryScore": 75.0}, {"id": "whoop://sleep/1909371566", "dayIndex": 120, "bedtime": "2025-08-09T20:04:12-04:00", "waketime": "2025-08-10T02:49:13-04:00", "bedtimeHour": 20.07, "waketimeHour": 2.8203, "durationHours": 6.75, "weekday": "Saturday", "recoveryScore": 93.0}, {"id": "whoop://sleep/1912095381", "dayIndex": 121, "bedtime": "2025-08-10T19:23:47-04:00", "waketime": "2025-08-11T02:55:37-04:00", "bedtimeHour": 19.3964, "waketimeHour": 2.9269, "durationHours": 7.531, "weekday": "Sunday", "recoveryScore": 65.0}, {"id": "whoop://sleep/1914936138", "dayIndex": 122, "bedtime": "2025-08-11T19:01:39-04:00", "waketime": "2025-08-12T02:54:11-04:00", "bedtimeHour": 19.0275, "waketimeHour": 2.9031, "durationHours": 7.876, "weekday": "Monday", "recoveryScore": 75.0}, {"id": "whoop://sleep/1917820330", "dayIndex": 123, "bedtime": "2025-08-12T19:13:50-04:00", "waketime": "2025-08-13T03:30:12-04:00", "bedtimeHour": 19.2306, "waketimeHour": 3.5033, "durationHours": 8.273, "weekday": "Tuesday", "recoveryScore": 50.0}, {"id": "whoop://sleep/19d3b0e4-c320-43dc-8ca1-cba4ef0b9faa", "dayIndex": 124, "bedtime": "2025-08-13T20:20:15-04:00", "waketime": "2025-08-14T03:47:17-04:00", "bedtimeHour": 20.3375, "waketimeHour": 3.7881, "durationHours": 7.451, "weekday": "Wednesday", "recoveryScore": 45.0}, {"id": "whoop://sleep/75311ec3-7916-4ad7-a94e-78e5738669b6", "dayIndex": 125, "bedtime": "2025-08-14T21:26:18-04:00", "waketime": "2025-08-15T05:02:18-04:00", "bedtimeHour": 21.4383, "waketimeHour": 5.0383, "durationHours": 7.6, "weekday": "Thursday", "recoveryScore": 45.0}, {"id": "whoop://sleep/fba5beab-6701-420a-9f34-a429ad4e2732", "dayIndex": 126, "bedtime": "2025-08-15T22:34:50-04:00", "waketime": "2025-08-16T05:08:51-04:00", "bedtimeHour": 22.5806, "waketimeHour": 5.1475, "durationHours": 6.567, "weekday": "Friday", "recoveryScore": 31.0}, {"id": "whoop://sleep/7b7a828e-274b-4594-9f89-f3b20d01acef", "dayIndex": 127, "bedtime": "2025-08-16T20:03:21-04:00", "waketime": "2025-08-17T05:34:45-04:00", "bedtimeHour": 20.0558, "waketimeHour": 5.5792, "durationHours": 9.523, "weekday": "Saturday", "recoveryScore": 53.0}, {"id": "whoop://sleep/c67b0132-bdca-400d-84c7-1fce4e93bed8", "dayIndex": 128, "bedtime": "2025-08-17T20:12:23-04:00", "waketime": "2025-08-18T05:49:17-04:00", "bedtimeHour": 20.2064, "waketimeHour": 5.8214, "durationHours": 9.615, "weekday": "Sunday", "recoveryScore": 81.0}, {"id": "whoop://sleep/cadc69ba-83d6-4217-aa3f-50f081ba27be", "dayIndex": 129, "bedtime": "2025-08-19T13:55:35-04:00", "waketime": "2025-08-19T21:51:59-04:00", "bedtimeHour": 13.9264, "waketimeHour": 21.8664, "durationHours": 7.94, "weekday": "Tuesday", "recoveryScore": 98.0}, {"id": "whoop://sleep/10a5b113-d3b5-423e-bb41-bf6b1646e531", "dayIndex": 130, "bedtime": "2025-08-20T21:56:24-04:00", "waketime": "2025-08-21T06:29:51-04:00", "bedtimeHour": 21.94, "waketimeHour": 6.4975, "durationHours": 8.557, "weekday": "Wednesday", "recoveryScore": 98.0}, {"id": "whoop://sleep/cbf4a15e-c8cb-4a82-87d7-97f01d3c2ed3", "dayIndex": 131, "bedtime": "2025-08-21T22:10:27-04:00", "waketime": "2025-08-22T04:30:58-04:00", "bedtimeHour": 22.1742, "waketimeHour": 4.5161, "durationHours": 6.342, "weekday": "Thursday", "recoveryScore": 80.0}, {"id": "whoop://sleep/9e53e2f2-41e8-4a3e-b5b5-2e9f53fe13dc", "dayIndex": 132, "bedtime": "2025-08-22T22:31:28-04:00", "waketime": "2025-08-23T06:02:29-04:00", "bedtimeHour": 22.5244, "waketimeHour": 6.0414, "durationHours": 7.517, "weekday": "Friday", "recoveryScore": 88.0}, {"id": "whoop://sleep/8b2f2353-056d-43e6-8d34-30c77325467d", "dayIndex": 133, "bedtime": "2025-08-23T23:26:29-04:00", "waketime": "2025-08-24T08:33:01-04:00", "bedtimeHour": 23.4414, "waketimeHour": 8.5503, "durationHours": 9.109, "weekday": "Saturday", "recoveryScore": 88.0}, {"id": "whoop://sleep/354aac7b-79e7-43d1-b627-de3cd3b763e7", "dayIndex": 134, "bedtime": "2025-08-24T23:00:44-04:00", "waketime": "2025-08-25T08:57:19-04:00", "bedtimeHour": 23.0122, "waketimeHour": 8.9553, "durationHours": 9.943, "weekday": "Sunday", "recoveryScore": 74.0}, {"id": "whoop://sleep/55c9496d-1b55-4529-98eb-7166b64a09af", "dayIndex": 135, "bedtime": "2025-08-25T22:57:20-04:00", "waketime": "2025-08-26T07:28:21-04:00", "bedtimeHour": 22.9556, "waketimeHour": 7.4725, "durationHours": 8.517, "weekday": "Monday", "recoveryScore": 47.0}, {"id": "whoop://sleep/fb3f104b-a4f4-40e2-a175-1611c9820e25", "dayIndex": 136, "bedtime": "2025-08-26T23:20:30-04:00", "waketime": "2025-08-27T08:02:01-04:00", "bedtimeHour": 23.3417, "waketimeHour": 8.0336, "durationHours": 8.692, "weekday": "Tuesday", "recoveryScore": 49.0}, {"id": "whoop://sleep/895c05c4-db28-4b1b-add4-5413bd8475a0", "dayIndex": 137, "bedtime": "2025-08-28T01:18:01-04:00", "waketime": "2025-08-28T08:45:41-04:00", "bedtimeHour": 1.3003, "waketimeHour": 8.7614, "durationHours": 7.461, "weekday": "Thursday", "recoveryScore": 42.0}, {"id": "whoop://sleep/e7ed87ca-59f9-488c-a1d8-88b52d12a095", "dayIndex": 138, "bedtime": "2025-08-28T23:41:59-04:00", "waketime": "2025-08-29T05:34:00-04:00", "bedtimeHour": 23.6997, "waketimeHour": 5.5667, "durationHours": 5.867, "weekday": "Thursday", "recoveryScore": 22.0}, {"id": "whoop://sleep/a5ee5500-ff23-45ce-84b8-43382a68faf1", "dayIndex": 139, "bedtime": "2025-08-30T04:32:31-04:00", "waketime": "2025-08-30T10:09:06-04:00", "bedtimeHour": 4.5419, "waketimeHour": 10.1517, "durationHours": 5.61, "weekday": "Saturday", "recoveryScore": 7.0}, {"id": "whoop://sleep/c04074c8-f8ff-4267-8a58-420cf0ffa3d9", "dayIndex": 140, "bedtime": "2025-08-31T05:22:32-04:00", "waketime": "2025-08-31T11:25:38-04:00", "bedtimeHour": 5.3756, "waketimeHour": 11.4272, "durationHours": 6.052, "weekday": "Sunday", "recoveryScore": 47.0}, {"id": "whoop://sleep/024f910f-c920-4762-841f-92a3b30eefdb", "dayIndex": 141, "bedtime": "2025-09-01T04:17:33-04:00", "waketime": "2025-09-01T13:55:35-04:00", "bedtimeHour": 4.2925, "waketimeHour": 13.9264, "durationHours": 9.634, "weekday": "Monday", "recoveryScore": 52.0}, {"id": "whoop://sleep/b69dd52b-bc84-453a-be28-a079ef00513d", "dayIndex": 142, "bedtime": "2025-09-02T04:08:37-04:00", "waketime": "2025-09-02T11:59:34-04:00", "bedtimeHour": 4.1436, "waketimeHour": 11.9928, "durationHours": 7.849, "weekday": "Tuesday", "recoveryScore": 65.0}, {"id": "whoop://sleep/7cf2b00f-a1ce-4f8f-9685-34e7ffb680d9", "dayIndex": 143, "bedtime": "2025-09-03T02:00:09-04:00", "waketime": "2025-09-03T10:42:26-04:00", "bedtimeHour": 2.0025, "waketimeHour": 10.7072, "durationHours": 8.705, "weekday": "Wednesday", "recoveryScore": 97.0}, {"id": "whoop://sleep/55f0fbb0-eda9-42af-bc1e-c0985a3297dc", "dayIndex": 144, "bedtime": "2025-09-04T03:16:13-04:00", "waketime": "2025-09-04T13:11:50-04:00", "bedtimeHour": 3.2703, "waketimeHour": 13.1972, "durationHours": 9.927, "weekday": "Thursday", "recoveryScore": 49.0}, {"id": "whoop://sleep/31ed54dd-2dce-493e-bfc4-2842da926c39", "dayIndex": 145, "bedtime": "2025-09-05T03:43:15-04:00", "waketime": "2025-09-05T11:59:15-04:00", "bedtimeHour": 3.7208, "waketimeHour": 11.9875, "durationHours": 8.267, "weekday": "Friday", "recoveryScore": 44.0}, {"id": "whoop://sleep/5e2bd450-8a17-48b8-a940-f9dc8a1dd345", "dayIndex": 146, "bedtime": "2025-09-06T02:11:30-04:00", "waketime": "2025-09-06T07:59:06-04:00", "bedtimeHour": 2.1917, "waketimeHour": 7.985, "durationHours": 5.793, "weekday": "Saturday", "recoveryScore": 37.0}, {"id": "whoop://sleep/027b81fb-d83a-4d69-80b4-9902a6bcd395", "dayIndex": 147, "bedtime": "2025-09-07T02:20:01-04:00", "waketime": "2025-09-07T12:16:37-04:00", "bedtimeHour": 2.3336, "waketimeHour": 12.2769, "durationHours": 9.943, "weekday": "Sunday", "recoveryScore": 42.0}, {"id": "whoop://sleep/03d7a4c6-7105-44b8-b44b-a28424437adb", "dayIndex": 148, "bedtime": "2025-09-08T03:04:05-04:00", "waketime": "2025-09-08T12:08:52-04:00", "bedtimeHour": 3.0681, "waketimeHour": 12.1478, "durationHours": 9.08, "weekday": "Monday", "recoveryScore": 53.0}, {"id": "whoop://sleep/47e7f588-c97a-4042-8138-7dcd7dbca624", "dayIndex": 149, "bedtime": "2025-09-09T01:10:41-04:00", "waketime": "2025-09-09T11:29:44-04:00", "bedtimeHour": 1.1781, "waketimeHour": 11.4956, "durationHours": 10.318, "weekday": "Tuesday", "recoveryScore": 71.0}, {"id": "whoop://sleep/11c2a3cd-a109-4dd9-a6a7-b90237ebe0ac", "dayIndex": 150, "bedtime": "2025-09-10T05:55:34-04:00", "waketime": "2025-09-10T12:08:30-04:00", "bedtimeHour": 5.9261, "waketimeHour": 12.1417, "durationHours": 6.216, "weekday": "Wednesday", "recoveryScore": 81.0}, {"id": "whoop://sleep/67ec3e7d-ec6e-4e6a-89ca-a1b91d2754fd", "dayIndex": 151, "bedtime": "2025-09-11T03:05:05-04:00", "waketime": "2025-09-11T13:13:37-04:00", "bedtimeHour": 3.0847, "waketimeHour": 13.2269, "durationHours": 10.142, "weekday": "Thursday", "recoveryScore": 50.0}, {"id": "whoop://sleep/0f4e8da3-6637-4e97-875a-c2140a7d9fbe", "dayIndex": 152, "bedtime": "2025-09-12T05:36:40-04:00", "waketime": "2025-09-12T14:55:38-04:00", "bedtimeHour": 5.6111, "waketimeHour": 14.9272, "durationHours": 9.316, "weekday": "Friday", "recoveryScore": 56.0}, {"id": "whoop://sleep/32a69711-4a66-4cf6-98b3-ab3af0a06127", "dayIndex": 153, "bedtime": "2025-09-13T03:45:18-04:00", "waketime": "2025-09-13T08:57:49-04:00", "bedtimeHour": 3.755, "waketimeHour": 8.9636, "durationHours": 5.209, "weekday": "Saturday", "recoveryScore": 64.0}, {"id": "whoop://sleep/55572c52-35ff-4fd1-bee9-1039297a5399", "dayIndex": 154, "bedtime": "2025-09-14T04:11:54-04:00", "waketime": "2025-09-14T14:04:55-04:00", "bedtimeHour": 4.1983, "waketimeHour": 14.0819, "durationHours": 9.884, "weekday": "Sunday", "recoveryScore": 29.0}, {"id": "whoop://sleep/abd29e20-0c1f-4217-a431-42b85e64dca8", "dayIndex": 155, "bedtime": "2025-09-15T04:53:26-04:00", "waketime": "2025-09-15T09:55:15-04:00", "bedtimeHour": 4.8906, "waketimeHour": 9.9208, "durationHours": 5.03, "weekday": "Monday", "recoveryScore": 76.0}, {"id": "whoop://sleep/5744b448-0eb7-4868-bc4b-6701f9214824", "dayIndex": 156, "bedtime": "2025-09-16T05:00:28-04:00", "waketime": "2025-09-16T13:15:59-04:00", "bedtimeHour": 5.0078, "waketimeHour": 13.2664, "durationHours": 8.259, "weekday": "Tuesday", "recoveryScore": 40.0}, {"id": "whoop://sleep/ba5ad46c-de63-4ced-b1d1-7b19c8307a65", "dayIndex": 157, "bedtime": "2025-09-17T05:59:00-04:00", "waketime": "2025-09-17T12:54:02-04:00", "bedtimeHour": 5.9833, "waketimeHour": 12.9006, "durationHours": 6.917, "weekday": "Wednesday", "recoveryScore": 58.0}, {"id": "whoop://sleep/360110f0-170b-4232-bb73-170a0ff3222c", "dayIndex": 158, "bedtime": "2025-09-18T03:52:02-04:00", "waketime": "2025-09-18T12:13:43-04:00", "bedtimeHour": 3.8672, "waketimeHour": 12.2286, "durationHours": 8.361, "weekday": "Thursday", "recoveryScore": 3.0}, {"id": "whoop://sleep/05ae8ad3-9c8a-46cb-9960-93b16f9ba9a2", "dayIndex": 159, "bedtime": "2025-09-19T06:02:35-04:00", "waketime": "2025-09-19T12:18:13-04:00", "bedtimeHour": 6.0431, "waketimeHour": 12.3036, "durationHours": 6.261, "weekday": "Friday", "recoveryScore": 84.0}, {"id": "whoop://sleep/c994cbe8-8c5e-4dd1-9b07-ac2ebfa322f4", "dayIndex": 160, "bedtime": "2025-09-20T09:05:37-04:00", "waketime": "2025-09-20T12:26:07-04:00", "bedtimeHour": 9.0936, "waketimeHour": 12.4353, "durationHours": 3.342, "weekday": "Saturday", "recoveryScore": 9.0}, {"id": "whoop://sleep/d52acc7f-73fb-478b-b4c9-e4a7d03b0af2", "dayIndex": 161, "bedtime": "2025-09-21T04:22:07-04:00", "waketime": "2025-09-21T15:58:09-04:00", "bedtimeHour": 4.3686, "waketimeHour": 15.9692, "durationHours": 11.601, "weekday": "Sunday", "recoveryScore": 69.0}, {"id": "whoop://sleep/7ff3bace-df8a-496c-8ea8-09c224178e32", "dayIndex": 162, "bedtime": "2025-09-22T06:36:13-04:00", "waketime": "2025-09-22T14:48:11-04:00", "bedtimeHour": 6.6036, "waketimeHour": 14.8031, "durationHours": 8.199, "weekday": "Monday", "recoveryScore": 95.0}, {"id": "whoop://sleep/01c1df64-1b77-45d4-9103-7d42282b7755", "dayIndex": 163, "bedtime": "2025-09-24T04:43:33-04:00", "waketime": "2025-09-24T14:35:41-04:00", "bedtimeHour": 4.7258, "waketimeHour": 14.5947, "durationHours": 9.869, "weekday": "Wednesday", "recoveryScore": 53.0}, {"id": "whoop://sleep/7af1593a-0700-4414-9682-668cdc5ed8ea", "dayIndex": 164, "bedtime": "2025-09-24T21:50:08-04:00", "waketime": "2025-09-25T00:39:50-04:00", "bedtimeHour": 21.8356, "waketimeHour": 0.6639, "durationHours": 2.828, "weekday": "Wednesday", "recoveryScore": 18.0}]
  
  </script>

  <script>
    // Spiral geometry defaults; tuned for roughly two months of nightly data.
    const MAX_NIGHTS = 60;
    const BASE_RADIUS_DEFAULT = 28;
    const DEFAULT_RADIUS_STEP = 8;
    const MIN_RADIUS_STEP = 2.6;

    let baseRadius = BASE_RADIUS_DEFAULT;
    let radiusStep = DEFAULT_RADIUS_STEP;
    let arcThickness = 12;

    let sessionsRaw = [];
    let sessions = [];
    let maxRadius = 0;
    let parseFailed = false;
    let parseErrorMessage = '';
    let scaleFactor = 1;
    let containerEl;

    // One-time p5.js setup: mount the canvas and compute derived drawing state.
    function setup() {
      containerEl = document.getElementById('canvas-container');
      const canvas = createCanvas(800, 600);
      canvas.parent(containerEl);
      textFont('Inter, system-ui, -apple-system, "Segoe UI", sans-serif');
      angleMode(RADIANS);
      parseEmbeddedSessions();
      prepareSessions();
      computeCanvasSize();
      noLoop();
    }

    // Draw the spiral or render a friendly message while data loads/fails.
    function draw() {
      background('#050910');

      if (parseFailed) {
        drawCenteredMessage(parseErrorMessage || 'Could not read embedded sleep data.');
        return;
      }

      if (!sessions.length) {
        drawCenteredMessage('Waiting for sleep sessions…');
        return;
      }

      translate(width / 2, height / 2);
      drawReferenceGrid();
      drawSessions();
    }

    // Parse the data payload that lives inline in the HTML document.
    function parseEmbeddedSessions() {
      const scriptEl = document.getElementById('sleep-data');
      if (!scriptEl) {
        parseFailed = true;
        parseErrorMessage = 'Missing embedded sleep data block.';
        return;
      }

      try {
        const text = scriptEl.textContent.trim();
        sessionsRaw = text ? JSON.parse(text) : [];
      } catch (error) {
        parseFailed = true;
        parseErrorMessage = 'Failed to parse embedded sleep data: ' + error.message;
      }
    }

    // Normalize session records into the geometry used by the spiral.
    function prepareSessions() {
      if (parseFailed) return;

      let raw = Array.isArray(sessionsRaw) ? sessionsRaw : Object.values(sessionsRaw || {});
      raw = raw.filter(entry => entry && entry.bedtime && entry.waketime);
      raw.sort((a, b) => new Date(a.bedtime) - new Date(b.bedtime));

      if (raw.length > MAX_NIGHTS) {
        raw = raw.slice(raw.length - MAX_NIGHTS);
      }

      adjustSpacingForCount(raw.length);

      sessions = raw.map((session, index) => {
        const bedtime = new Date(session.bedtime);
        const waketime = new Date(session.waketime);
        const safeDuration = Number(session.durationHours);
        const duration = Number.isFinite(safeDuration)
          ? safeDuration
          : (waketime - bedtime) / (1000 * 60 * 60);
        const radius = baseRadius + index * radiusStep;
        const startAngle = timeToAngle(bedtime);
        let endAngleRaw = timeToAngle(waketime);
        let endAngle = endAngleRaw;
        if (endAngle <= startAngle) endAngle += TWO_PI;

        return {
          index,
          id: session.id,
          radius,
          bedtime,
          waketime,
          weekday: session.weekday,
          recoveryScore: session.recoveryScore,
          durationHours: duration,
          startAngle,
          endAngle,
          endAngleRaw
        };
      });

      const last = sessions[sessions.length - 1];
      maxRadius = last ? last.radius + radiusStep * 1.6 : 320;
    }

    // Adapt arc spacing so the visualization stays legible at different counts.
    function adjustSpacingForCount(count) {
      baseRadius = BASE_RADIUS_DEFAULT;

      if (!count) {
        radiusStep = DEFAULT_RADIUS_STEP;
        arcThickness = 12;
        return;
      }

      const targetRadius = Math.max(160, Math.min(260, windowHeight * 0.22 + windowWidth * 0.06));
      radiusStep = (targetRadius - baseRadius) / Math.max(1, count - 1);
      radiusStep = Math.max(MIN_RADIUS_STEP, Math.min(DEFAULT_RADIUS_STEP, radiusStep));
      arcThickness = Math.max(2, Math.min(8, radiusStep * 0.68));
    }

    // Keep the canvas square and scale the spiral to fill the available container.
    function computeCanvasSize() {
      const padding = 100;
      let containerSize = 600;
      if (containerEl) {
        const rect = containerEl.getBoundingClientRect();
        containerSize = Math.min(rect.width, rect.height);
      }

      const rawDiameter = maxRadius * 2;
      const usable = Math.max(200, containerSize - padding);
      resizeCanvas(containerSize, containerSize);

      if (rawDiameter <= 0 || usable <= 0) {
        scaleFactor = 1;
      } else {
        scaleFactor = Math.min(1, usable / rawDiameter);
      }
    }

    // Hour labels and guide rings help the spiral read like a clock.
    function drawReferenceGrid() {
      const guideColor = color(255, 255, 255, 30);
      noFill();
      strokeWeight(0.8);
      stroke(guideColor);
      const ringStep = radiusStep * 4;
      for (let r = baseRadius; r <= maxRadius + 1; r += ringStep) {
        const scaled = r * scaleFactor;
        ellipse(0, 0, scaled * 2, scaled * 2);
      }

      const guideHours = [0, 6, 12, 18];
      strokeWeight(1);
      for (const hour of guideHours) {
        const angle = hourToAngle(hour);
        const pos = polarToCartesian(maxRadius * scaleFactor, angle);
        line(0, 0, pos.x, pos.y);
        push();
        translate(pos.x * 1.05, pos.y * 1.05);
        fill(212, 224, 245, 240);
        noStroke();
        textAlign(CENTER, CENTER);
        textSize(12);
        text(String(hour).padStart(2, '0') + ':00', 0, 0);
        pop();
      }
    }

    // Plot each sleep arc plus a dot marking when the session ended.
    function drawSessions() {
      const asleepColor = color(118, 196, 255, 210);
      const wakeColor = color(255, 155, 122, 200);

      for (const session of sessions) {
        const radius = session.radius * scaleFactor;
        stroke(asleepColor);
        strokeWeight(Math.max(0.8, arcThickness * scaleFactor));
        noFill();
        arc(0, 0, radius * 2, radius * 2, session.startAngle, session.endAngle, OPEN);

        const wakeAngleWrapped = wrapAngle(session.endAngleRaw);
        const waketimePos = polarToCartesian(radius, wakeAngleWrapped);

        noStroke();
        const wakeSize = Math.max(2.5, 5 * scaleFactor);
        fill(wakeColor);
        circle(waketimePos.x, waketimePos.y, wakeSize);
      }
    }

    function drawCenteredMessage(message) {
      push();
      fill(220);
      textAlign(CENTER, CENTER);
      textSize(18);
      text(message, width / 2, height / 2);
      pop();
    }

    function timeToAngle(date) {
      if (!(date instanceof Date) || isNaN(date.getTime())) return -HALF_PI;
      const hours = date.getHours() + date.getMinutes() / 60 + date.getSeconds() / 3600;
      return hourToAngle(hours);
    }

    function hourToAngle(hours) {
      return (hours / 24) * TWO_PI - HALF_PI;
    }

    function polarToCartesian(radius, angle) {
      return {
        x: radius * Math.cos(angle),
        y: radius * Math.sin(angle)
      };
    }

    function wrapAngle(angle) {
      const tau = TWO_PI;
      return ((angle % tau) + tau) % tau;
    }

    function normalizeAngle(angle) {
      const tau = TWO_PI;
      if (angle < -Math.PI) angle += tau;
      if (angle > Math.PI) angle -= tau;
      return angle;
    }

    function windowResized() {
      computeCanvasSize();
      redraw();
    }
  </script>
</body>
</html>
